<div class='summary-card d-flex flex-column mat-elevation-z8'>
  <div class='d-flex justify-content-between align-items-center price-section  mb-3'>
    <div style="color:green" class='youWillGet d-flex justify-content-center'>
      <div>
        <div class='d-flex justify-content-center mb-1'>YOU WILL GET</div>
        <div class='d-flex justify-content-center amount'>
          {{ (totals.remainingAmount > 0?totals.remainingAmount:0) | currency:'inr':'₹':'1.0-2'}}
        </div>
      </div>

    </div>
    <div style="color:red" class="youWillGive d-flex justify-content-center">
      <div>
        <div class='d-flex justify-content-center mb-1'>YOU WILL GIVE</div>
        <div class='d-flex justify-content-center amount'>
          {{(totals.remainingAmount < 0? totals.remainingAmount:0) | currency:'inr':'₹':'1.0-2'}} </div>
        </div>
      </div>
    </div>

    <div class='d-flex justify-content-center report-section'>print</div>
  </div>

  <mat-table [dataSource]="combinedOrders" multiTemplateDataRows='true' class="mat-elevation-z8">
    <ng-container matColumnDef="date">
      <mat-header-cell *matHeaderCellDef='let element'>DATE {{element}}</mat-header-cell>
      <mat-cell *matCellDef="let element">
        <div>
          <div>{{(element['ordered_on'] || element['paid_on']) | date:'dd-MM-yy'}}</div>
          <div>{{element['comments']}}</div>
          <div> {{element['interest_type'] && element['interest_type'].name}} {{element['monthly_interest'] }}</div>
        </div>
      </mat-cell>
      <mat-footer-cell mat-footer-cell *matFooterCellDef> TOTALS </mat-footer-cell>
    </ng-container>
    <ng-container matColumnDef="youGave">
      <mat-header-cell *matHeaderCellDef> YOU GAVE </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <div *ngIf='element.type !=="repayment"'>

          <!-- <div>{{element.current_principal | currency: 'inr':'₹':'1.0-0'}}</div> -->
          <div>{{element.original_principal | currency:"inr":'₹':"1.0-2"}}</div>
        </div>
      </mat-cell>
      <mat-footer-cell class='mat-footer-cell' mat-footer-cell *matFooterCellDef> {{totals.ordersTotal | currency:"inr":'₹':"1.0-2"}} </mat-footer-cell>
    </ng-container>

    <ng-container matColumnDef="youGot">
      <mat-header-cell *matHeaderCellDef>YOU GOT </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <div>{{ element['price'] | currency: 'inr':'₹':'1.0-0' }} </div>
      </mat-cell>
      <mat-footer-cell class='mat-footer-cell' mat-footer-cell *matFooterCellDef> {{totals.repaymentsTotal | currency:"inr":'₹':"1.0-2"}} </mat-footer-cell>
    </ng-container>

    <ng-container matColumnDef="repayments">
      <mat-header-cell *matHeaderCellDef>
        <div>
          <div>INTEREST ACCURED</div>
        </div>
      </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <div>
          <div>{{((element["paid_interest"] | sum) + element['remaining_interest']) | currency:"inr":'₹':"1.0-2" }}</div>
        </div>
      </mat-cell>
      <mat-footer-cell  class='mat-footer-cell' mat-footer-cell *matFooterCellDef> {{(totals.ordersTotalInterest - totals.repaymentsTotalInterest) | currency:"inr":'₹':"1.0-2"}} </mat-footer-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
    <mat-row (click)='onRowClick(row)' *matRowDef="let row; columns: displayedColumns"
      [class.expanded-row]="expandedElement === row"></mat-row>
    <mat-footer-row  class='mat-footer-row' *matFooterRowDef='displayedColumns; sticky: true'></mat-footer-row>
  </mat-table>
